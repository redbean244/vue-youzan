{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/pages/search/search.js"],"names":["url","hotLists","banner","topLists","subLists","rank","searchList","details","deal","cartAdd","cartLists","cartReduce","cartRemove","cartMremove","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","Vue","use","__WEBPACK_IMPORTED_MODULE_1_mint_ui_lib_infinite_scroll___default","a","qs","parse","location","href","substr","keyword","id","el","data","isShow","pageNum","pageSize","loading","allLoaded","created","this","getSearchList","methods","_this","axios","get","then","res","curLists","lists","length","concat","move","document","documentElement","scrollTop","toTop","Velocity","body","duration"],"mappings":"yHAAA,IAAIA,GACAC,SAAU,kBACVC,OAAQ,gBACRC,SAAU,oBACVC,SAAU,oBACVC,KAAM,iBACNC,WAAY,eACZC,QAAS,iBACTC,KAAM,cACNC,QAAS,YACTC,UAAW,aACXC,WAAY,eACZC,WAAY,eACZC,YAAa,gBACbC,aAAc,gBACdC,WAAY,eACZC,cAAe,kBACfC,cAAe,kBACfC,kBAAmB,uBAQvB,IAAK,IAAIC,KAAOnB,EACRA,EAAIoB,eAAeD,KACnBnB,EAAImB,GAJD,0CAIenB,EAAImB,IAIfnB,yQCvBfqB,UAAIC,IAAJC,EAAAC,SAEmBC,IAAGC,MAAMC,SAASC,KAAKC,OAAO,IAA5CC,YAAQC,OAEb,IAAIV,WACAW,GAAI,aACJC,MACI3B,WAAY,KACZ4B,QAAQ,EACRC,QAAS,EACTC,SAAU,EACVC,SAAS,EACTC,WAAW,GAEfC,QAVI,WAWAC,KAAKC,iBAETC,SACID,cADI,WACW,IAAAE,EAAAH,KACPA,KAAKF,YACTE,KAAKH,SAAU,EACfO,IAAMC,IAAI7C,IAAIM,YACVwB,QAASA,EACTC,GAAIA,EACJI,QAASK,KAAKL,QACdC,SAAUI,KAAKJ,WAChBU,KAAK,SAAAC,GACJ,IAAIC,EAAWD,EAAId,KAAKgB,MAErBD,EAASE,OAAOP,EAAKP,WACpBO,EAAKL,WAAY,GAElBK,EAAKrC,WACJqC,EAAKrC,WAAaqC,EAAKrC,WAAW6C,OAAOH,GAEzCL,EAAKrC,WAAa0C,EAEtBL,EAAKR,YAETK,KAAKH,SAAU,IAEnBe,KAxBI,WAyBIC,SAASC,gBAAgBC,UAAY,IACrCf,KAAKN,QAAS,EAEdM,KAAKN,QAAS,GAGtBsB,MA/BI,WAgCAC,IAASJ,SAASK,KAAK,UACnBC,SAAS,MAEbnB,KAAKN,QAAS","file":"static/js/search.011173a9811f92854de5.js","sourcesContent":["let url = {\r\n    hotLists: '/index/hotLists',\r\n    banner: '/index/banner',\r\n    topLists: '/category/topList',\r\n    subLists: '/category/subList',\r\n    rank: '/category/rank',\r\n    searchList: '/search/list',\r\n    details: '/goods/details',\r\n    deal: '/goods/deal',\r\n    cartAdd: '/cart/add',\r\n    cartLists: '/cart/list',\r\n    cartReduce: '/cart/reduce',\r\n    cartRemove: '/cart/remove',\r\n    cartMremove: '/cart/mremove',\r\n    addressLists: '/address/list',\r\n    addressAdd: '/address/add',\r\n    addressRemove: '/address/remove',\r\n    addressUpdate: '/address/update',\r\n    addressSetDefault: '/address/setDefault'\r\n}\r\n\r\n\r\n//开发环境和真实环境的切换\r\n// let host = ''\r\nlet host = 'http://rap2api.taobao.org/app/mock/7058'\r\n\r\nfor (let key in url) {\r\n    if (url.hasOwnProperty(key)) {\r\n        url[key] = host + url[key]\r\n    }\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import \"css/common.css\"\r\nimport \"./search.css\"\r\n\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport url from 'js/api.js'\r\nimport qs from 'qs'\r\nimport Velocity from 'velocity-animate'\r\nimport { InfiniteScroll } from 'mint-ui'\r\nVue.use(InfiniteScroll);\r\n\r\nlet {keyword,id} = qs.parse(location.href.substr(1))\r\n\r\nnew Vue({\r\n    el: '.container',\r\n    data:{\r\n        searchList: null,\r\n        isShow: false,\r\n        pageNum: 1,\r\n        pageSize: 6,\r\n        loading: false,\r\n        allLoaded: false\r\n    },\r\n    created(){\r\n        this.getSearchList();\r\n    },\r\n    methods:{\r\n        getSearchList(){\r\n            if (this.allLoaded) return;\r\n            this.loading = true;\r\n            axios.get(url.searchList,{\r\n                keyword: keyword,\r\n                id: id,\r\n                pageNum: this.pageNum,\r\n                pageSize: this.pageSize\r\n            }).then(res=>{\r\n                let curLists = res.data.lists;\r\n                //判断所有数据是否加载完毕\r\n                if(curLists.length<this.pageSize){\r\n                    this.allLoaded = true;\r\n                }\r\n                if(this.searchList){\r\n                    this.searchList = this.searchList.concat(curLists)\r\n                }else{\r\n                    this.searchList = curLists\r\n                }\r\n                this.pageNum++;               \r\n            })\r\n            this.loading = false;\r\n        },\r\n        move(){\r\n            if (document.documentElement.scrollTop > 100){\r\n                this.isShow = true\r\n            }else{\r\n                this.isShow = false\r\n            }\r\n        },\r\n        toTop(){\r\n            Velocity(document.body,'scroll',{\r\n                duration:1000\r\n            })\r\n            this.isShow = false\r\n        }\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.js"],"sourceRoot":""}