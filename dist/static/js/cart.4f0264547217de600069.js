webpackJsonp([4],{"0C+S":function(t,e){},NW8W:function(t,e){},OgVB:function(t,e){},TFhR:function(t,e,i){"use strict";var n={hotLists:"/index/hotLists",banner:"/index/banner",topLists:"/category/topList",subLists:"/category/subList",rank:"/category/rank",searchList:"/search/list",details:"/goods/details",deal:"/goods/deal",cartAdd:"/cart/add",cartLists:"/cart/list",cartReduce:"/cart/reduce",cartRemove:"/cart/remove",cartMremove:"/cart/mremove",addressLists:"/address/list",addressAdd:"/address/add",addressRemove:"/address/remove",addressUpdate:"/address/update",addressSetDefault:"/address/setDefault"};for(var o in n)n.hasOwnProperty(o)&&(n[o]="http://rap2api.taobao.org/app/mock/7058"+n[o]);e.a=n},eC21:function(t,e){},gWPi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("OgVB");var n=i("/Lyv"),o=i.n(n),s=(i("NW8W"),i("0C+S"),i("eC21"),i("7+uW")),c=i("mtWM"),r=i.n(c),d=i("TFhR"),a=i("9qgI"),h=i.n(a),u=i("Zrlr"),f=i.n(u),g=i("wxAW"),l=i.n(g),v=i("wI4f"),m=function(){function t(){f()(this,t)}return l()(t,null,[{key:"add",value:function(t){return Object(v.a)(d.a.cartAdd,{id:t.id,number:1})}},{key:"reduce",value:function(t){return Object(v.a)(d.a.cartReduce,{id:t.id,number:1})}},{key:"cartRemove",value:function(t){return Object(v.a)(d.a.cartRemove,{id:t.id})}},{key:"cartMremove",value:function(t){return Object(v.a)(d.a.cartMremove,{ids:t})}}]),t}();new s.default({el:".container",data:{lists:null,total:0,editingShop:null,editingShopIndex:-1},created:function(){this.getList()},computed:{allSelect:{get:function(){return!(!this.lists||!this.lists.length)&&this.lists.every(function(t){return t.checked})},set:function(t){this.lists.forEach(function(e){e.checked=t,e.goodsList.forEach(function(e){e.checked=t})})}},allRemoveSelect:{get:function(){return!!this.editingShop&&this.editingShop.removeChecked},set:function(t){this.editingShop&&(this.editingShop.removeChecked=t,this.editingShop.goodsList.forEach(function(e){e.removeChecked=t}))}},selectLists:function(){var t=[],e=0;return this.lists&&this.lists.length&&this.lists.forEach(function(i){i.goodsList.forEach(function(i){i.checked&&(t.push(i),e+=i.price*i.number)})}),this.total=e,t},removeLists:function(){var t=[];return this.editingShop?(this.editingShop.goodsList.forEach(function(e){e.removeChecked&&t.push(e)}),t):[]}},methods:{getList:function(){var t=this;r.a.get(d.a.cartLists).then(function(e){var i=e.data.cartList;i.forEach(function(t){t.checked=!1,t.removeChecked=!1,t.editing=!1,t.editingMsg="编辑",t.goodsList.forEach(function(t){t.checked=!1,t.removeChecked=!1})}),t.lists=i})},selectGood:function(t,e){var i=this.editingShop?"removeChecked":"checked";e[i]=!e[i],t[i]=t.goodsList.every(function(t){return t[i]})},selectShop:function(t){var e=this.editingShop?"removeChecked":"checked";t[e]=!t[e],t.goodsList.forEach(function(i){i[e]=t[e]})},selectAll:function(){var t=this.editingShop?"allRemoveSelect":"allSelect";this[t]=!this[t]},edit:function(t,e){t.editing=!t.editing,t.editingMsg=t.editing?"完成":"编辑",this.lists.forEach(function(i,n){e!==n&&(i.editing=!1,i.editingMsg=t.editing?"":"编辑")}),this.editingShop=t.editing?t:null,this.editingShopIndex=t.editing?e:-1},add:function(t){m.add(t).then(function(e){t.number++})},reduce:function(t){1!==t.number&&m.reduce(t).then(function(e){t.number--})},removeShop:function(){this.editingShop=null,this.editingShopIndex=-1,this.lists.forEach(function(t){t.editing=!1,t.editingMsg="编辑"})},remove:function(t,e,i,n){this.removeData={shop:t,shopIndex:e,good:i,goodIndex:n},this.removeMsg="确定删除该商品?",this.removeConfirm()},removeList:function(){this.removeMsg="确定删除"+this.removeLists.length+"件商品",this.removeConfirm()},removeConfirm:function(){var t=this;"确定删除该商品?"===this.removeMsg?o.a.confirm(this.removeMsg).then(function(e){var i=t.removeData,n=i.shop,o=i.shopIndex,s=i.good,c=i.goodIndex;m.cartRemove(s).then(function(e){n.goodsList.splice(c,1),n.goodsList.length||(t.lists.splice(o,1),t.removeShop())})}).catch(function(t){}):o.a.confirm(this.removeMsg).then(function(e){var i=[];t.removeLists.forEach(function(t){i.push(t.id)}),m.cartMremove(i).then(function(e){var i=[];t.editingShop.goodsList.forEach(function(e){-1===t.removeLists.findIndex(function(t){return t.id==e.id})&&i.push(e)}),i.length?t.editingShop.goodsList=i:(t.lists.splice(t.editingShopIndex,1),t.removeShop())})}).catch(function(t){})},start:function(t,e){e.startX=t.changedTouches[0].clientX},end:function(t,e,i,n){var o=t.changedTouches[0].clientX,s="0";i.startX-o>100&&(s="-60px"),o-i.startX>100&&(s="0px"),h()(this.$refs["good-"+e+"-"+n],{left:s})}}})},wI4f:function(t,e,i){"use strict";var n=i("//Fk"),o=i.n(n),s=i("mtWM"),c=i.n(s);e.a=function(t,e,i){return new o.a(function(n,o){"get"===i?c.a.get(t).then(function(t){200!==t.data.status&&200!==t.status||n(t),o(t)}).catch(function(t){o(t)}):c.a.post(t,e).then(function(t){200===t.data.status||200===t.status?n(t):300===t.data.status&&(href.location="index.html",n(t)),o(t)}).catch(function(t){o(t)})})}}},["gWPi"]);
//# sourceMappingURL=cart.4f0264547217de600069.js.map