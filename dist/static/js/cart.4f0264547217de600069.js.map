{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/cartService.js","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js"],"names":["url","hotLists","banner","topLists","subLists","rank","searchList","details","deal","cartAdd","cartLists","cartReduce","cartRemove","cartMremove","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","Cart","good","fetch","id","number","ids","Vue","el","data","lists","total","editingShop","editingShopIndex","created","this","getList","computed","allSelect","get","length","every","shop","checked","set","newVal","forEach","goodsList","allRemoveSelect","removeChecked","selectLists","arr","push","price","removeLists","methods","_this","axios","then","res","cartList","editing","editingMsg","selectGood","attr","selectShop","selectAll","edit","shopIndex","item","i","add","reduce","removeShop","remove","goodIndex","removeData","removeMsg","removeConfirm","removeList","_this2","message_box_default","a","confirm","action","_removeData","splice","catch","err","findIndex","start","e","startX","changedTouches","clientX","end","endX","left","Volecity","$refs","type","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","status","error","post","href","location"],"mappings":"qHAAA,IAAIA,GACAC,SAAU,kBACVC,OAAQ,gBACRC,SAAU,oBACVC,SAAU,oBACVC,KAAM,iBACNC,WAAY,eACZC,QAAS,iBACTC,KAAM,cACNC,QAAS,YACTC,UAAW,aACXC,WAAY,eACZC,WAAY,eACZC,YAAa,gBACbC,aAAc,gBACdC,WAAY,eACZC,cAAe,kBACfC,cAAe,kBACfC,kBAAmB,uBAQvB,IAAK,IAAIC,KAAOnB,EACRA,EAAIoB,eAAeD,KACnBnB,EAAImB,GAJD,0CAIenB,EAAImB,IAIfnB,0SCDAqB,mFA3BAC,GACP,OAAOC,YAAMvB,IAAIS,SACbe,GAAGF,EAAKE,GACRC,OAAO,mCAIDH,GACV,OAAOC,YAAMvB,IAAIW,YACba,GAAGF,EAAKE,GACRC,OAAO,uCAIGH,GACd,OAAOC,YAAMvB,IAAIY,YACbY,GAAGF,EAAKE,yCAIGE,GACf,OAAOH,YAAMvB,IAAIa,aACba,IAAIA,aCdN,IAAIC,WACVC,GAAI,aACJC,MACIC,MAAM,KACNC,MAAM,EACNC,YAAa,KACbC,kBAAmB,GAEvBC,QARc,WASVC,KAAKC,WAETC,UACIC,WACIC,IADM,WAEF,SAAGJ,KAAKL,QAAOK,KAAKL,MAAMU,SACfL,KAAKL,MAAMW,MAAM,SAAAC,GACpB,OAAOA,EAAKC,WAKxBC,IATM,SASFC,GACAV,KAAKL,MAAMgB,QAAQ,SAAAJ,GACfA,EAAKC,QAAUE,EACfH,EAAKK,UAAUD,QAAQ,SAAAxB,GACnBA,EAAKqB,QAAUE,QAK/BG,iBACIT,IADY,WAER,QAAGJ,KAAKH,aACGG,KAAKH,YAAYiB,eAIhCL,IAPY,SAORC,GACGV,KAAKH,cACJG,KAAKH,YAAYiB,cAAgBJ,EACjCV,KAAKH,YAAYe,UAAUD,QAAQ,SAAAxB,GAC/BA,EAAK2B,cAAgBJ,OAKrCK,YAnCK,WAoCD,IAAIC,KACApB,EAAQ,EAYZ,OAXGI,KAAKL,OAAOK,KAAKL,MAAMU,QACtBL,KAAKL,MAAMgB,QAAQ,SAAAJ,GACfA,EAAKK,UAAUD,QAAQ,SAAAxB,GAChBA,EAAKqB,UACJQ,EAAIC,KAAK9B,GACTS,GAAOT,EAAK+B,MAAM/B,EAAKG,YAKvCU,KAAKJ,MAAQA,EACNoB,GAEXG,YAnDK,WAoDD,IAAIH,KACJ,OAAGhB,KAAKH,aACJG,KAAKH,YAAYe,UAAUD,QAAQ,SAAAxB,GAC5BA,EAAK2B,eACJE,EAAIC,KAAK9B,KAGV6B,QAKnBI,SACInB,QADI,WACK,IAAAoB,EAAArB,KACLsB,IAAMlB,IAAIvC,IAAIU,WAAWgD,KAAK,SAAAC,GAC1B,IAAI7B,EAAM6B,EAAI9B,KAAK+B,SACnB9B,EAAMgB,QAAQ,SAAAJ,GACVA,EAAKC,SAAU,EACfD,EAAKO,eAAgB,EACrBP,EAAKmB,SAAU,EACfnB,EAAKoB,WAAa,KAClBpB,EAAKK,UAAUD,QAAQ,SAAAxB,GACnBA,EAAKqB,SAAU,EACfrB,EAAK2B,eAAgB,MAG7BO,EAAK1B,MAAQA,KAGrBiC,WAjBI,SAiBOrB,EAAKpB,GACZ,IAAI0C,EAAO7B,KAAKH,YAAc,gBAAkB,UAChDV,EAAK0C,IAAS1C,EAAK0C,GACnBtB,EAAKsB,GAAQtB,EAAKK,UAAUN,MAAM,SAAAnB,GAC9B,OAAOA,EAAK0C,MAGpBC,WAxBI,SAwBOvB,GACP,IAAIsB,EAAO7B,KAAKH,YAAc,gBAAkB,UAChDU,EAAKsB,IAAStB,EAAKsB,GACnBtB,EAAKK,UAAUD,QAAQ,SAAAxB,GACnBA,EAAK0C,GAAQtB,EAAKsB,MAG1BE,UA/BI,WAgCA,IAAIF,EAAO7B,KAAKH,YAAc,kBAAoB,YAClDG,KAAK6B,IAAS7B,KAAK6B,IAEvBG,KAnCI,SAmCCzB,EAAK0B,GACN1B,EAAKmB,SAAUnB,EAAKmB,QACpBnB,EAAKoB,WAAapB,EAAKmB,QAAU,KAAO,KACxC1B,KAAKL,MAAMgB,QAAQ,SAACuB,EAAKC,GAClBF,IAAcE,IACbD,EAAKR,SAAU,EACfQ,EAAKP,WAAapB,EAAKmB,QAAU,GAAK,QAG9C1B,KAAKH,YAAcU,EAAKmB,QAAUnB,EAAO,KACzCP,KAAKF,iBAAmBS,EAAKmB,QAAUO,GAAa,GAExDG,IA/CI,SA+CAjD,GACAD,EAAKkD,IAAIjD,GAAMoC,KAAK,SAAAC,GAChBrC,EAAKG,YAGb+C,OApDI,SAoDGlD,GACe,IAAfA,EAAKG,QACRJ,EAAKmD,OAAOlD,GAAMoC,KAAK,SAAAC,GACnBrC,EAAKG,YAGbgD,WA1DI,WA2DAtC,KAAKH,YAAc,KACnBG,KAAKF,kBAAoB,EACzBE,KAAKL,MAAMgB,QAAQ,SAACJ,GAChBA,EAAKmB,SAAU,EACfnB,EAAKoB,WAAa,QAG1BY,OAlEI,SAkEGhC,EAAK0B,EAAU9C,EAAKqD,GACvBxC,KAAKyC,YAAclC,OAAK0B,YAAU9C,OAAKqD,aACvCxC,KAAK0C,UAAY,WACjB1C,KAAK2C,iBAGTC,WAxEI,WAyEA5C,KAAK0C,UAAL,OAAwB1C,KAAKmB,YAAYd,OAAzC,MACAL,KAAK2C,iBAETA,cA5EI,WA4EW,IAAAE,EAAA7C,KACW,aAAnBA,KAAK0C,UACJI,EAAAC,EAAWC,QAAQhD,KAAK0C,WAAWnB,KAAK,SAAA0B,GAAU,IAAAC,EACRL,EAAKJ,WAAtClC,EADyC2C,EACzC3C,KAAK0B,EADoCiB,EACpCjB,UAAU9C,EAD0B+D,EAC1B/D,KAAKqD,EADqBU,EACrBV,UACzBtD,EAAKT,WAAWU,GAAMoC,KAAK,SAAAC,GACvBjB,EAAKK,UAAUuC,OAAOX,EAAU,GAC5BjC,EAAKK,UAAUP,SACfwC,EAAKlD,MAAMwD,OAAOlB,EAAU,GAC5BY,EAAKP,kBAGdc,MAAM,SAAAC,MAITP,EAAAC,EAAWC,QAAQhD,KAAK0C,WAAWnB,KAAK,SAAA0B,GACpC,IAAI1D,KACJsD,EAAK1B,YAAYR,QAAQ,SAAAxB,GACrBI,EAAI0B,KAAK9B,EAAKE,MAElBH,EAAKR,YAAYa,GAAKgC,KAAK,SAAAC,GACvB,IAAIR,KACJ6B,EAAKhD,YAAYe,UAAUD,QAAQ,SAAAxB,IAIjB,IAHF0D,EAAK1B,YAAYmC,UAAU,SAAApB,GACnC,OAAOA,EAAK7C,IAAMF,EAAKE,MAGvB2B,EAAIC,KAAK9B,KAGd6B,EAAIX,OACHwC,EAAKhD,YAAYe,UAAYI,GAE7B6B,EAAKlD,MAAMwD,OAAON,EAAK/C,iBAAiB,GACxC+C,EAAKP,kBAGdc,MAAM,SAAAC,OAKjBE,MAtHI,SAsHEC,EAAErE,GACJA,EAAKsE,OAASD,EAAEE,eAAe,GAAGC,SAEtCC,IAzHI,SAyHAJ,EAAEvB,EAAU9C,EAAKqD,GACjB,IAAIqB,EAAOL,EAAEE,eAAe,GAAGC,QAC3BG,EAAO,IACR3E,EAAKsE,OAASI,EAAO,MACpBC,EAAO,SAERD,EAAO1E,EAAKsE,OAAS,MACpBK,EAAO,OAEXC,IAAS/D,KAAKgE,MAAL,QAAmB/B,EAAnB,IAAgCO,IACrCsB,8FC7LD1E,IA3Bf,SAAevB,EAAI6B,EAAKuE,GACpB,OAAO,IAAIC,EAAAnB,EAAQ,SAACoB,EAAQC,GACZ,QAATH,EACC3C,IAAMlB,IAAIvC,GAAK0D,KAAK,SAAAC,GACQ,MAApBA,EAAI9B,KAAK2E,QAAkC,MAAf7C,EAAI6C,QAChCF,EAAQ3C,GAEZ4C,EAAO5C,KACR4B,MAAM,SAAAkB,GACLF,EAAOE,KAGXhD,IAAMiD,KAAK1G,EAAI6B,GAAM6B,KAAK,SAAAC,GACE,MAApBA,EAAI9B,KAAK2E,QAAkC,MAAf7C,EAAI6C,OAChCF,EAAQ3C,GACiB,MAApBA,EAAI9B,KAAK2E,SACdG,KAAKC,SAAW,aAChBN,EAAQ3C,IAEZ4C,EAAO5C,KACR4B,MAAM,SAAAkB,GACLF,EAAOE","file":"static/js/cart.4f0264547217de600069.js","sourcesContent":["let url = {\r\n    hotLists: '/index/hotLists',\r\n    banner: '/index/banner',\r\n    topLists: '/category/topList',\r\n    subLists: '/category/subList',\r\n    rank: '/category/rank',\r\n    searchList: '/search/list',\r\n    details: '/goods/details',\r\n    deal: '/goods/deal',\r\n    cartAdd: '/cart/add',\r\n    cartLists: '/cart/list',\r\n    cartReduce: '/cart/reduce',\r\n    cartRemove: '/cart/remove',\r\n    cartMremove: '/cart/mremove',\r\n    addressLists: '/address/list',\r\n    addressAdd: '/address/add',\r\n    addressRemove: '/address/remove',\r\n    addressUpdate: '/address/update',\r\n    addressSetDefault: '/address/setDefault'\r\n}\r\n\r\n\r\n//开发环境和真实环境的切换\r\n// let host = ''\r\nlet host = 'http://rap2api.taobao.org/app/mock/7058'\r\n\r\nfor (let key in url) {\r\n    if (url.hasOwnProperty(key)) {\r\n        url[key] = host + url[key]\r\n    }\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import url from './api.js'\r\nimport fetch from './fetch.js'\r\n\r\nclass  Cart{\r\n    static add(good){\r\n        return fetch(url.cartAdd,{\r\n            id:good.id,\r\n            number:1\r\n        })\r\n    }\r\n\r\n    static reduce(good){\r\n        return fetch(url.cartReduce,{\r\n            id:good.id,\r\n            number:1\r\n        })\r\n    }\r\n\r\n    static cartRemove(good){\r\n        return fetch(url.cartRemove,{\r\n            id:good.id\r\n        })\r\n    }\r\n\r\n    static cartMremove(ids){\r\n        return fetch(url.cartMremove,{\r\n            ids:ids\r\n        })\r\n    }\r\n}\r\n\r\nexport default Cart\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js","import \"./cart_base.css\"\r\nimport \"./cart_trade.css\"\r\nimport \"./cart.css\"\r\n\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport url from 'js/api.js'\r\nimport Volecity from 'velocity-animate'\r\nimport Cart from 'js/cartService.js'\r\n\r\nimport { MessageBox } from 'mint-ui';\r\n\r\nlet app = new Vue({\r\n    el: \".container\",\r\n    data:{\r\n        lists:null,\r\n        total:0,\r\n        editingShop: null,\r\n        editingShopIndex: -1\r\n    },\r\n    created(){\r\n        this.getList();\r\n    },\r\n    computed:{\r\n        allSelect:{\r\n            get(){\r\n                if(this.lists&&this.lists.length){\r\n                    return this.lists.every(shop=>{\r\n                        return shop.checked;\r\n                    })\r\n                }\r\n                return false;\r\n            },\r\n            set(newVal){\r\n                this.lists.forEach(shop=>{\r\n                    shop.checked = newVal;\r\n                    shop.goodsList.forEach(good=>{\r\n                        good.checked = newVal;\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        allRemoveSelect:{\r\n            get(){\r\n                if(this.editingShop){\r\n                    return this.editingShop.removeChecked;\r\n                }\r\n                return false;\r\n            },\r\n            set(newVal){\r\n                if(this.editingShop){\r\n                    this.editingShop.removeChecked = newVal;\r\n                    this.editingShop.goodsList.forEach(good=>{\r\n                        good.removeChecked = newVal;\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        selectLists(){\r\n            let arr = [];\r\n            let total = 0;\r\n            if(this.lists&&this.lists.length){\r\n                this.lists.forEach(shop=>{\r\n                    shop.goodsList.forEach(good=>{\r\n                        if(good.checked){\r\n                            arr.push(good);\r\n                            total+=good.price*good.number;\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n            this.total = total;\r\n            return arr;\r\n        },\r\n        removeLists(){\r\n            let arr=[];\r\n            if(this.editingShop){\r\n                this.editingShop.goodsList.forEach(good=>{\r\n                    if(good.removeChecked){\r\n                        arr.push(good)\r\n                    }\r\n                })\r\n                return arr;\r\n            }\r\n            return [];\r\n        }\r\n    },\r\n    methods:{\r\n        getList(){\r\n            axios.get(url.cartLists).then(res=>{\r\n                let lists=res.data.cartList;\r\n                lists.forEach(shop=>{\r\n                    shop.checked = false;\r\n                    shop.removeChecked = false;\r\n                    shop.editing = false;\r\n                    shop.editingMsg = '编辑';\r\n                    shop.goodsList.forEach(good=>{\r\n                        good.checked = false;\r\n                        good.removeChecked = false;\r\n                    })\r\n                })\r\n                this.lists = lists;\r\n            })\r\n        },\r\n        selectGood(shop,good){\r\n            let attr = this.editingShop ? 'removeChecked' : 'checked';\r\n            good[attr] = !good[attr];\r\n            shop[attr] = shop.goodsList.every(good => {\r\n                return good[attr];\r\n            })\r\n        },\r\n        selectShop(shop){\r\n            let attr = this.editingShop ? 'removeChecked' : 'checked';\r\n            shop[attr] = !shop[attr];\r\n            shop.goodsList.forEach(good=>{\r\n                good[attr] = shop[attr];\r\n            })\r\n        },\r\n        selectAll(){\r\n            let attr = this.editingShop ? 'allRemoveSelect' : 'allSelect';\r\n            this[attr] = !this[attr];\r\n        },\r\n        edit(shop,shopIndex){\r\n            shop.editing =!shop.editing;\r\n            shop.editingMsg = shop.editing ? '完成' : '编辑';\r\n            this.lists.forEach((item,i)=>{\r\n                if(shopIndex !== i){\r\n                    item.editing = false;\r\n                    item.editingMsg = shop.editing ? '' : '编辑'\r\n                }\r\n            })\r\n            this.editingShop = shop.editing ? shop : null;\r\n            this.editingShopIndex = shop.editing ? shopIndex : -1;\r\n        },\r\n        add(good){\r\n            Cart.add(good).then(res=>{\r\n                good.number++;\r\n            })\r\n        },\r\n        reduce(good){\r\n            if(good.number ===1) return;\r\n            Cart.reduce(good).then(res=>{\r\n                good.number--;\r\n            })\r\n        },\r\n        removeShop(){\r\n            this.editingShop = null;\r\n            this.editingShopIndex = -1;\r\n            this.lists.forEach((shop)=>{\r\n                shop.editing = false;\r\n                shop.editingMsg = '编辑'\r\n            })\r\n        },\r\n        remove(shop,shopIndex,good,goodIndex){\r\n            this.removeData = {shop,shopIndex,good,goodIndex};\r\n            this.removeMsg = '确定删除该商品?';\r\n            this.removeConfirm();\r\n\r\n        },\r\n        removeList(){\r\n            this.removeMsg = `确定删除${this.removeLists.length}件商品`;\r\n            this.removeConfirm();\r\n        },\r\n        removeConfirm(){\r\n            if(this.removeMsg === \"确定删除该商品?\"){\r\n                MessageBox.confirm(this.removeMsg).then(action => {\r\n                    let {shop,shopIndex,good,goodIndex} = this.removeData;\r\n                    Cart.cartRemove(good).then(res=>{\r\n                        shop.goodsList.splice(goodIndex,1);\r\n                        if(!shop.goodsList.length){\r\n                            this.lists.splice(shopIndex,1);\r\n                            this.removeShop();\r\n                        }\r\n                    })\r\n                }).catch(err=>{\r\n\r\n                });\r\n            }else{\r\n                MessageBox.confirm(this.removeMsg).then(action => {\r\n                    let ids =[];\r\n                    this.removeLists.forEach(good=>{\r\n                        ids.push(good.id);\r\n                    })\r\n                    Cart.cartMremove(ids).then(res=>{\r\n                        let arr = [];\r\n                        this.editingShop.goodsList.forEach(good=>{\r\n                            let index = this.removeLists.findIndex(item=>{\r\n                                return item.id == good.id;\r\n                            })\r\n                            if(index === -1){\r\n                                arr.push(good);\r\n                            }\r\n                        })\r\n                        if(arr.length){\r\n                            this.editingShop.goodsList = arr;\r\n                        }else{\r\n                            this.lists.splice(this.editingShopIndex,1);\r\n                            this.removeShop();\r\n                        }\r\n                    })\r\n                }).catch(err=>{\r\n                    \r\n                });\r\n            }\r\n        },\r\n        start(e,good){\r\n            good.startX = e.changedTouches[0].clientX;\r\n        },\r\n        end(e,shopIndex,good,goodIndex){\r\n            let endX = e.changedTouches[0].clientX;\r\n            let left = '0';\r\n            if(good.startX - endX > 100){\r\n                left = '-60px';\r\n            }\r\n            if(endX - good.startX > 100){\r\n                left = '0px';\r\n            }\r\n            Volecity(this.$refs[`good-${shopIndex}-${goodIndex}`],{\r\n                left\r\n            })\r\n        }\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\r\n\r\nfunction fetch(url,data,type){\r\n    return new Promise((resolve,reject) =>{\r\n        if(type === \"get\"){\r\n            axios.get(url).then(res=>{\r\n                if (res.data.status === 200  || res.status === 200){\r\n                    resolve(res);\r\n                }\r\n                reject(res)\r\n            }).catch(error=>{\r\n                reject(error)\r\n            })\r\n        }else{\r\n            axios.post(url,data).then(res=>{\r\n                if (res.data.status === 200  || res.status === 200){\r\n                    resolve(res);\r\n                }else if(res.data.status === 300){\r\n                    href.location = \"index.html\";\r\n                    resolve(res);\r\n                }\r\n                reject(res)\r\n            }).catch(error=>{\r\n                reject(error)\r\n            })\r\n        }\r\n    })\r\n} \r\n\r\nexport default fetch\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js"],"sourceRoot":""}